{
  "name": "debug-performance",
  "description": "Profile performance bottlenecks",
  "workflow": "workflow/performance_workflow.md",
  "agent": "agents/performance_agent.md",
  "parameters": {
    "component": {
      "type": "string",
      "description": "Optional component to profile",
      "required": false,
      "values": ["crypto", "dag", "network", "protocol", "memory", "cpu"]
    },
    "duration": {
      "type": "string",
      "description": "Profile duration",
      "required": false,
      "default": "60s"
    },
    "tool": {
      "type": "string",
      "description": "Profiling tool to use",
      "required": false,
      "default": "perf",
      "values": ["perf", "flamegraph", "valgrind", "heaptrack", "tracy"]
    },
    "output_format": {
      "type": "string",
      "description": "Output format for profiling data",
      "required": false,
      "default": "report",
      "values": ["report", "flamegraph", "json", "csv"]
    }
  },
  "examples": [
    "/debug-performance",
    "/debug-performance --component crypto",
    "/debug-performance --duration 300s",
    "/debug-performance --tool flamegraph --output_format flamegraph",
    "/debug-performance --component memory --tool heaptrack"
  ],
  "profiling_metrics": {
    "cpu": [
      "cycles",
      "instructions",
      "cache_misses",
      "branch_mispredictions",
      "context_switches"
    ],
    "memory": [
      "allocations",
      "deallocations",
      "heap_usage",
      "peak_memory",
      "fragmentation"
    ],
    "io": [
      "disk_reads",
      "disk_writes",
      "network_packets",
      "syscalls"
    ],
    "concurrency": [
      "lock_contention",
      "thread_utilization",
      "async_task_queue",
      "channel_capacity"
    ]
  },
  "output": {
    "success": "Performance profiling report",
    "format": [
      "1. CPU Usage",
      "2. Memory Profile",
      "3. I/O Statistics",
      "4. Hot Spots",
      "5. Optimization Suggestions",
      "6. Call Graph Analysis",
      "7. Lock Contention Analysis",
      "8. Memory Leak Detection"
    ],
    "artifacts": {
      "profile_data": ".claude/profiles/",
      "flamegraphs": ".claude/flamegraphs/",
      "reports": ".claude/reports/debug/"
    }
  },
  "bottleneck_detection": {
    "cpu_bound": "High CPU usage with low I/O wait",
    "memory_bound": "High cache misses or page faults",
    "io_bound": "High I/O wait with low CPU usage",
    "lock_contention": "High mutex wait times",
    "allocation_overhead": "Excessive allocator calls"
  },
  "error_handling": {
    "invalid_component": "Component validation error",
    "profile_error": "Profiling failure details",
    "resource_limit": "Resource limitation warning"
  }
}